<!-- user-dash.component.html -->
<div class="dashboard-container">
  <!-- Sidebar Navigation -->
  <app-sidebar></app-sidebar>
  
  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Top Navigation Bar -->
    <header class="top-nav">
      <div class="search-bar">
        <i class="icon search-icon"></i>
        <input type="text" placeholder="Search for resources, friends, or help...">
      </div>
      <div class="top-nav-actions">
        <button class="btn-icon notifications">
          <i class="icon notification-icon"></i>
          <span class="notification-badge">3</span>
        </button>
        <button class="btn-icon messages">
          <i class="icon message-icon"></i>
          <span class="message-badge">2</span>
        </button>
        <div class="user-menu">
          <img src="assets/images/avatar1.png" alt="User Avatar" class="user-avatar-small">
          <span class="user-name">{{ currentUser?.name || 'Guest' }}</span>
          <i class="icon dropdown-icon"></i>
        </div>
      </div>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-content" *ngIf="!isLoading; else loadingTemplate">
      <div class="welcome-section">
        <h1>{{ welcomeMessage }}</h1>
        <p class="date">{{ today | date:'EEEE, MMMM d, y' }}</p>
      </div>

      <!-- Profile Completion Prompt if needed -->
      <div class="dashboard-card profile-completion" *ngIf="!isProfileComplete()">
        <div class="card-header">
          <h2>Complete Your Profile</h2>
        </div>
        <div class="journal-content">
          <p>Please complete your profile to get the most out of our platform.</p>
          <button class="btn btn-primary" (click)="completeProfile()">Complete Profile</button>
        </div>
      </div>

      <!-- Dashboard Grid Layout -->
      <div class="dashboard-grid">
        <!-- Mood Check-in Card -->
        <div class="dashboard-card mood-checkin">
          <div class="card-header">
            <h2>How are you feeling today?</h2>
          </div>
          <div class="mood-selector">
            <div class="mood-option" *ngFor="let mood of moods" (click)="selectMood(mood.value)">
              <div class="mood-icon" [ngClass]="mood.value"></div>
              <span>{{ mood.label }}</span>
            </div>
          </div>
          <button class="btn btn-primary" (click)="recordMood()">Record Mood</button>
        </div>

        <!-- Today's Quote Card -->
        <div class="dashboard-card quote-card">
          <div class="card-header">
            <h2>Today's Inspiration</h2>
          </div>
          <div class="quote-content">
            <p class="quote-text">"{{ quote.text }}"</p>
            <p class="quote-author">― {{ quote.author }}</p>
          </div>
          <button class="btn btn-text" (click)="getNewQuote()">Get Another Quote</button>
        </div>

        <!-- Crisis Support Card -->
        <div class="dashboard-card crisis-card">
          <div class="card-header">
            <h2>Need Immediate Help?</h2>
          </div>
          <div class="crisis-options">
            <a routerLink="/crisis-chat" class="crisis-option">
              <i class="icon crisis-chat-icon"></i>
              <span>Crisis Chat</span>
            </a>
            <a routerLink="/crisis-call" class="crisis-option">
              <i class="icon crisis-call-icon"></i>
              <span>Crisis Call</span>
            </a>
          </div>
          <p class="crisis-text">Our trained counselors are available 24/7 for urgent support.</p>
        </div>

        <!-- Upcoming Sessions Card -->
        <div class="dashboard-card sessions-card" *ngIf="sessions && sessions.length > 0">
          <div class="card-header">
            <h2>Upcoming Sessions</h2>
            <a routerLink="/sessions" class="view-all">View All</a>
          </div>
          <div class="sessions-list">
            <div class="session-item" *ngFor="let session of sessions">
              <div class="session-avatar">
                <img [src]="session.counselorImage" [alt]="session.counselorName">
              </div>
              <div class="session-info">
                <h3>{{ session.title }}</h3>
                <p class="session-time">{{ session.date | date:'MMM d' }} • {{ session.time }}</p>
              </div>
              <div class="session-actions">
                <button class="btn btn-outlined" (click)="joinSession(session)">Join</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Goals Progress Card -->
        <div class="dashboard-card goals-card">
          <div class="card-header">
            <h2>Goals Progress</h2>
            <a routerLink="/goals" class="view-all">View All</a>
          </div>
          <div class="goals-list">
            <div class="goal-item" *ngFor="let goal of goals">
              <div class="goal-info">
                <h3>{{ goal.title }}</h3>
                <div class="goal-progress">
                  <div class="progress-bar">
                    <div class="progress" [style.width.%]="goal.progressPercentage"></div>
                  </div>
                  <span class="progress-text">{{ goal.progressText }}</span>
                </div>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" routerLink="/add-goal">Add New Goal</button>
        </div>

        <!-- Journal Reminder Card -->
        <div class="dashboard-card journal-card">
          <div class="card-header">
            <h2>Daily Journal</h2>
          </div>
          <div class="journal-content">
            <p>{{ journalMessage }}</p>
            <button class="btn btn-primary" routerLink="/journal/new">Write Today's Entry</button>
          </div>
        </div>

        <!-- Other dashboard components omitted for brevity but would follow the same pattern -->
        
        <!-- Community Activity Card -->
        <div class="dashboard-card community-card">
          <div class="card-header">
            <h2>Community Posts</h2>
            <a routerLink="/community" class="view-all">View All</a>
          </div>
          <div class="posts-list">
            <div class="post-item" *ngFor="let post of communityPosts">
              <div class="post-user">
                <img [src]="post.userAvatar" [alt]="post.userName">
                <div class="post-user-info">
                  <h3>{{ post.userName }}</h3>
                  <p class="post-time">{{ post.timeAgo }}</p>
                </div>
              </div>
              <div class="post-content">
                <p>{{ post.content }}</p>
              </div>
              <div class="post-actions">
                <button class="post-action-btn" (click)="likePost(post)">
                  <i class="icon like-icon"></i>
                  <span>{{ post.likes }}</span>
                </button>
                <button class="post-action-btn" (click)="viewComments(post)">
                  <i class="icon comment-icon"></i>
                  <span>{{ post.comments }}</span>
                </button>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" routerLink="/community/new">Create Post</button>
        </div>

        <!-- Assessment Card -->
        <div class="dashboard-card assessment-card">
          <div class="card-header">
            <h2>Recommended Assessments</h2>
            <a routerLink="/assessments" class="view-all">View All</a>
          </div>
          <div class="assessment-list">
            <div class="assessment-item" *ngFor="let assessment of assessments">
              <div class="assessment-icon" [ngClass]="assessment.type"></div>
              <div class="assessment-info">
                <h3>{{ assessment.title }}</h3>
                <p>{{ assessment.questions }} questions • {{ assessment.duration }} minutes</p>
              </div>
              <button class="btn btn-outlined" (click)="startAssessment(assessment)">Start</button>
            </div>
          </div>
        </div>

        <!-- Resources Card -->
        <div class="dashboard-card resources-card">
          <div class="card-header">
            <h2>Resources For You</h2>
          </div>
          <div class="resources-list">
            <a [routerLink]="['/resources', resource.id]" class="resource-item" *ngFor="let resource of resources">
              <div class="resource-icon" [ngClass]="resource.type"></div>
              <div class="resource-info">
                <h3>{{ resource.title }}</h3>
                <p>{{ resource.type | titlecase }} • {{ resource.duration }}</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Loading Template -->
<ng-template #loadingTemplate>
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <p>Loading your dashboard...</p>
  </div>
</ng-template>